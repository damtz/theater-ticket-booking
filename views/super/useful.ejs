<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chart</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link href="/public/css/booking.css" rel="stylesheet" type="text/css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      integrity="sha512-Kd8TZj5zwej/JI8MvhiBSvjN3pXyI+plQdFpspSoZdbsq1eX2aodScThRSVN4P8P9eWvHvkjjIMtoPzSEEBLcA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!--  -->
  </head>

  <body>
    <header class="header">
      <div id="navbar">
        <span class="u-name"><b>Admin</b></span>
        <i class="fa fa-user" aria-hidden="true"></i>
      </div>
    </header>
    <main class="table">
      <section class="table__header">
        <h1>Booking Details</h1>
        <div class="input-group">
          <input type="search" placeholder="Search Data..." />
          <i class="fas fa-search"></i>
        </div>
      </section>
      <section class="table__body">
        <table>
          <thead>
            <tr>
              <th>SI No <span class="icon-arrow">&UpArrow;</span></th>
              <th>Hall Name</th>
              <th>Movie Name <span class="icon-arrow">&UpArrow;</span></th>
              <th>User Name <span class="icon-arrow">&UpArrow;</span></th>
              <th>Booking Date <span class="icon-arrow">&UpArrow;</span></th>
              <th>Location <span class="icon-arrow">&UpArrow;</span></th>
              <th>Seat Number</th>
              <th>Amount (NU)</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>ZZZZZZZ</td>
              <td>Seoul</td>
              <td>17 Dec, 2022</td>
              <td><strong> Thimphu </strong></td>
              <td>Twowa</td>
              <td>12</td>
              <td>200</td>
              <td>
                <i class="fa fa-edit edit-icon"></i>
                <i class="fa fa-trash delete-icon"></i>
              </td>
            </tr>
            <tr>
              <td>2</td>
              <td>dfzxc</td>
              <td>Seoul</td>
              <td>17 Dec, 2022</td>

              <td><strong> Thimphu </strong></td>
              <td>Twowa</td>
              <td>12</td>
              <td>200</td>
              <td>
                <i class="fa fa-edit edit-icon"></i>
                <i class="fa fa-trash delete-icon"></i>
              </td>
            </tr>
            <tr>
              <td>3</td>
              <td>ZZZZZZZ</td>
              <td>Karma</td>
              <td>17 Dec, 2022</td>

              <td><strong> Thimphu </strong></td>
              <td>Twowa</td>
              <td>12</td>
              <td>200</td>
              <td>
                <i class="fa fa-edit edit-icon"></i>
                <i class="fa fa-trash delete-icon"></i>
              </td>
            </tr>
            <tr>
              <td>4</td>
              <td>ZZZZZZZ</td>
              <td>Nar</td>
              <td>17 Dec, 2022</td>

              <td><strong> Thimphu </strong></td>
              <td>Twowa</td>
              <td>12</td>
              <td>200</td>
              <td>
                <i class="fa fa-edit edit-icon"></i>
                <i class="fa fa-trash delete-icon"></i>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
    <div class="popup-container" id="popupContainer" style="display: none">
      <div class="popup-content">
        <span class="cancel-icon" onclick="closePopup()">&times;</span>
        <form id="editForm" action="#">
          <div>
            <label for="movieName">Movie Name:</label>
            <input type="text" id="movieName" name="movieName" required />
          </div>
          <div>
            <label for="userName">User Name:</label>
            <input type="text" id="userName" name="userName" required />
          </div>
          <div>
            <label for="bookingDate">Booking Date:</label>
            <input type="date" id="bookingDate" name="bookingDate" required />
          </div>
          <div>
            <label for="location">Location:</label>
            <input type="text" id="location" name="location" required />
          </div>
          <div>
            <label for="hallName">Hall Name:</label>
            <input type="text" id="hallName" name="hallName" required />
          </div>
          <div>
            <label for="seatNumber">Seat Number:</label>
            <input type="text" id="seatNumber" name="seatNumber" required />
          </div>
          <div>
            <label for="amount">Amount (NU):</label>
            <input type="text" id="amount" name="amount" required />
          </div>
          <div class="action-buttons">
            <button type="submit">Save</button>
          </div>
        </form>
      </div>
    </div>
    <script>
      var editIcons = document.querySelectorAll('.edit-icon');
      var popupContainer = document.getElementById('popupContainer');
      var editForm = document.getElementById('editForm');

      editIcons.forEach(function (editIcon, index) {
        editIcon.addEventListener('click', function () {
          openPopup(index);
        });
      });

      function openPopup(index) {
        // Get the table row values based on the index
        var tableRow = document.querySelectorAll('tbody tr')[index];
        var movieName = tableRow.cells[1].textContent;
        var userName = tableRow.cells[2].textContent;
        var bookingDate = tableRow.cells[3].textContent;
        var location = tableRow.cells[4].textContent;
        var hallName = tableRow.cells[5].textContent;
        var seatNumber = tableRow.cells[6].textContent;
        var amount = tableRow.cells[7].textContent;

        // Set the form field values
        editForm.elements.movieName.value = movieName;
        editForm.elements.userName.value = userName;
        editForm.elements.bookingDate.value = bookingDate;
        editForm.elements.location.value = location;
        editForm.elements.hallName.value = hallName;
        editForm.elements.seatNumber.value = seatNumber;
        editForm.elements.amount.value = amount;

        // Show the popup
        popupContainer.style.display = 'flex';
      }

      function closePopup() {
        // Reset the form
        editForm.reset();

        // Hide the popup
        popupContainer.style.display = 'none';
      }
    </script>
    <script src="/views/pages/booking.js"></script>
    <footer class="footer">
      <div class="footer-content">
        <p class="text-muted">&copy; 2023 FlexTix</p>
      </div>
    </footer>
  </body>
</html>
