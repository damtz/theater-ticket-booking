<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Navigation Bar with Search Box</title>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />

    <head>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-sAd15VB6Iz7vGQVQzvBE30s16yzzsTBgd1u6VEnVIt56RtOlPuP6MluuKjXl4f73sdrgmhy6gAmudRJ0lZCJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
  
    <body>

   
      <style>

        .alertify-notifier .ajs-success {
          background: #5cb85c;
          color: #fff; /* Set the text color to white */
        }
      
        /* Styles for error message */
      .alertify-notifier .ajs-error {
        background: #d9534f;
        color: #fff;
      }

        nav {
          width: 100%;
          height: 100px;
          display: flex;
          justify-content: space-between;
          padding: 35px 5%;
        }
        nav .logo{
          font-size: 30px;
          font-weight: 700;
        }
        nav ul{
          display: flex;
          list-style: none;
        }
        nav ul li{
          padding: 8px 15px;
          border-radius: 10px;
          transition: 0.2s ease-in;
        }
        nav ul li a{
          color: white;
          text-decoration: none;
        }
        nav .menubtn{
          font-size: 30px;
          font-weight: bolder;
          cursor: pointer;
          display: none;
        }
        
        
         
          .btn-outline-warning {
          background-color: transparent;
          color: #eee;
          border: 2px solid #ffe36d;
          height: 40px;
          width: 80px;
          margin-left: 40px;
        }
        
        
        
          .nav .Search-bar {
          display: flex;
          justify-content: center;
          align-items: right;
        }
        
        nav .box {
          height: 40px;
          display: flex;
          cursor: pointer;
          padding: 10px 20px;
          border-radius: 20px;
          align-items: center;
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
          background-color: transparent;
          border: 2px solid #ffe36d;
        }
        
        nav .box input {
          width: 200px;
          outline: none;
          border: none;
          font-weight: 500;
          transition: 0.8s;
          background: transparent;
        }
        
        nav .box a .fas {
          color: #ffe36d;
          font-size: 18px;
        }

        .active{
        color: #ffe36d;
          }
        
         
        .sideNav{
          height: 100%;
          width: 50%;
          position: fixed;
          top: 0;
          right: 0;
          background-color: #615d5d;
          overflow-x: hidden;
          transition: 0.3s ease-in;
          padding-top: 60px;
          display: none;
          z-index: 100;
          gap: 5px;
        }
         
        .sideNav a{
          padding: 8px 8px 8px 40px;
          display: block;
          font-size: 25px;
          font-weight: 500;
          color: #d1d1d1;
          transition: 0.3s;
          text-decoration: none;
        }
        
        .sideNav .btn-outline-warning {
          background-color: transparent;
          color: #eee;
          border: 2px solid #ffe36d;
          height: 40px;
          width: 80px;
          margin-left: 0px;
        }
        
        .sideNav a:hover{
          color: white;
        }
        .sideNav .closeBtn{
          position: absolute;
          top: 10px;
          right: 25px;
          font-size: 20px;
          margin-left: 50px;
          color: #ffe36d;
        }
        
        
        /* responsive navbar css */
        @media screen and (max-width: 600px) {
          nav .menubtn{
            display: flex;
          }
          nav .navLinks{
            display: none;
          }
          .sideNav {
            display: block !important;
          }
        
          nav .box input {
          width: 120px;
          
        }
          
        }
        
        
        @media screen  and (min-width: 768px) and (max-width:992px){
        
          nav .navLinks{
            display: none;
          }
        
          nav .menubtn{
            display: flex;
          }
          
          .sideNav {
            display: block !important;
          }
        
        
          
        }
        
        </style>
              <nav class="container">
                <div class="logo">
                 <img  onclick="location.href='/'" src="/public/images/logo.png" alt="">
                </div>
                <form method="GET" action="/search">
                  <div class="Search-bar">
                  <div class="box">
                    <input type="text" name="search" id="search" placeholder="Search.....">
                     <button style="background: transparent; border: transparent;" type="submit"><i class="fas fa-search" style="color: #ffe36d;"></i></button>
                    </a>
                  </div>
                  </div>
                </form>
                 
                <span class="menubtn" onclick="openNav()" style="color: #ffe36d;">&#9776;</span>
                <div class="navLinks">
                  <ul>
                    <li><a href="/" class="nav__link">Home</a></li>
                    <li><a href="/new-releases" class="nav__link">New Release</a></li>
                    <li><a href="/up-coming" class="nav__link">UpComing</a></li>
        
                    <% if(currentUser){ %>
                    <li><div class="navbar-item dropdown has-divider">
                      <a
                        class="navbar-link"
                        href="#"
                        id="dropdownMenuLink"
                        role="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false">
                        <div
                          class="d-flex justify-content-end account-setting">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="30"
                            height="30"
                            fill="currentColor"
                            class="bi bi-person-circle"
                            style="color: #ffe36d"
                            viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                            <path
                              fill-rule="evenodd"
                              d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                          </svg>
                        </div>
                      </a>
                      <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  
                        <li>
                          
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            fill="currentColor"
                            class="bi bi-person-circle"
                            
                            viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                            <path
                              fill-rule="evenodd"
                              d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                          </svg>
                          <span><%=currentUser.username%></span>
                  
                        </li>
                        
                        
                        <hr />
                        <li>
                          <a class="dropdown-item" href="/my-bookings">
                            <img
                              src="/public/images/bookinghistory.png"
                              style="margin-right: 10px" />Booking History</a
                          >
                        </li>
                        <hr />
                        <li>
                          <a class="dropdown-item" href="/logout">
                            <i
                              class="fa-solid fa-right-from-bracket"
                              style="margin-right: 10px"></i
                            >Logout</a
                          >
                        </li>
                      </ul>
                    </div>
            </li>
            <% }else{ %>
        
            <li>
              <a href="#" class="nav-item nav-link">
                  <button
                  type="button"
                  onclick="location.href='login'"
                  class="btn btn-outline-warning"
                  id="Signin">
                  Sign In
                </button>
              
              </a>
             </li>
             <% } %>
        
              </ul>
            </div>
              
        
                
                <!-- after logout -->
        
              <div class="sideNav" id="sidenav">
                <a href="#" class="closeBtn" onclick="closeNav()"> &#10006;</a>
                <a href="/"><img src="/public/images/logo.png" alt=""></a>
                <a href="/" class="nav__link"><h6>Home</h6></a>
                <a href="/new-releases" class="nav__link"><h6>New Release</h6></a>
                <a href="/up-coming" class="nav__link"><h6>Up Coming</h6></a>
        
                <% if(currentUser){ %>
                <div class="navbar-item dropdown has-divider d-flex justify-content-start">
                  <a
                    class="navbar-link"
                    href="#"
                    id="dropdownMenuLink"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <div
                      class="d-flex justify-content-end account-setting">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="30"
                        height="30"
                        fill="currentColor"
                        class="bi bi-person-circle"
                        style="color: #ffe36d"
                        viewBox="0 0 16 16">
                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                        <path
                          fill-rule="evenodd"
                          d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                      </svg>
                    </div>
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink" style="height: 200px; width: 250px;">
                    <li>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        fill="currentColor"
                        class="bi bi-person-circle"
                        
                        viewBox="0 0 16 16">
                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                        <path
                          fill-rule="evenodd"
                          d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                      </svg>
                    <%=currentUser.username%>       
                    </li>
                    
                    
                    <hr />
                    <li>
                      <span contenteditable="true" style="outline: none; cursor: pointer;"
                      onclick="window.location.href='/my-bookings'">
                        </a><img src="/public/images/bookinghistory.png" onclick="location.href='/my-bookings'" style="height: 20px; width: 20px;"/>Booking History </li>
                    <hr />
                    <li>
                      <span contenteditable="true" style="outline: none; cursor: pointer;"
                      onclick="window.location.href='/logout'">
                        <i class="fa-solid fa-right-from-bracket" onclick="location.href='/logout'"></i>Logout </li>
                  </ul>
                </div>
                <% }else{ %> 
                  <a href="#" class="nav-item nav-link">
                      <button
                      type="button"
                      onclick="location.href='login'"
                      class="btn btn-outline-warning"
                      id="Signin">
                      Sign In
                    </button>
                  
                  </a>
              </div>
              <% } %>
              </nav>
        
        <!-- javascript to make side menu appear -->
 <script>
  function openNav() {
    document.getElementById("sidenav").style.width = "50%";
  }
  function closeNav() {
    document.getElementById("sidenav").style.width = "0%";
  }
</script>

    </nav>
<!-- Javascript for active link -->
<script>


    const navLinkEls = document.querySelectorAll('.nav__link');

    // Check if there's a previously stored active link
    const activeLink = localStorage.getItem('activeLink');

    // Set "active" class to the previously stored active link
    if (activeLink) {
      const activeLinkEl = document.querySelector(`[href="${activeLink}"]`);
      if (activeLinkEl) {
        activeLinkEl.classList.add('active');
      }
    }

    navLinkEls.forEach(navLinkEl => {
      navLinkEl.addEventListener('click', (event) => {
        event.preventDefault();

        // Remove "active" class from the previously clicked link
        const activeLink = document.querySelector('.active');
        if (activeLink) {
          activeLink.classList.remove('active');
        }

        // Set "active" class to the clicked link
        navLinkEl.classList.add('active');

        // Store the active link in localStorage
        localStorage.setItem('activeLink', navLinkEl.getAttribute('href'));

        // Navigate to the clicked link
        window.location.href = navLinkEl.getAttribute('href');
      });
    });
</script>
  </body>
</html>
